<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Centipede ü¶Ç</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #111;
            font-family: Arial, sans-serif;
            color: #fff;
            overflow: hidden;
        }
        
        #game-container {
            position: relative;
            width: 600px;
            height: 700px;
            background-color: #000;
            border: 4px solid #444;
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
        }
        
        #game-board {
            width: 100%;
            height: 600px;
            position: relative;
            overflow: hidden;
            background-color: #000;
        }
        
        #info-panel {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 100px;
            padding: 0 20px;
            background-color: #222;
            border-top: 4px solid #444;
        }
        
        #score, #lives {
            font-size: 24px;
            font-weight: bold;
            color: #0f0;
            text-shadow: 0 0 5px #0f0;
        }
        
        .player {
            position: absolute;
            font-size: 30px;
            transform: translateX(-50%);
            z-index: 10;
        }
        
        .bullet {
            position: absolute;
            font-size: 20px;
            transform: translateX(-50%);
            z-index: 5;
        }
        
        .segment {
            position: absolute;
            font-size: 30px;
            transform: translateX(-50%);
            z-index: 5;
        }
        
        .mushroom {
            position: absolute;
            font-size: 24px;
            transform: translateX(-50%);
            z-index: 3;
        }
        
        .fog {
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 20;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        #start-btn {
            padding: 10px 20px;
            font-size: 20px;
            background-color: #0f0;
            color: #000;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }
        
        #start-btn:hover {
            background-color: #0c0;
            transform: scale(1.05);
        }
        
        #game-over {
            font-size: 40px;
            color: #f00;
            text-shadow: 0 0 10px #f00;
        }
        
        #final-score {
            font-size: 30px;
            color: #0f0;
            margin-top: 20px;
        }
        
        .explosion {
            position: absolute;
            font-size: 40px;
            transform: translateX(-50%);
            z-index: 15;
            animation: explode 0.5s forwards;
        }
        
        @keyframes explode {
            0% { transform: translateX(-50%) scale(0.5); opacity: 1; }
            100% { transform: translateX(-50%) scale(2); opacity: 0; }
        }
        
        .power-up {
            position: absolute;
            font-size: 24px;
            transform: translateX(-50%);
            z-index: 4;
            animation: pulse 1s infinite alternate;
        }
        
        @keyframes pulse {
            0% { transform: translateX(-50%) scale(1); }
            100% { transform: translateX(-50%) scale(1.2); }
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="game-board"></div>
        <div id="info-panel">
            <div id="score">–°—á–µ—Ç: 0</div>
            <button id="start-btn">–°—Ç–∞—Ä—Ç üéÆ</button>
            <div id="lives">–ñ–∏–∑–Ω–∏: ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
        </div>
    </div>

    <script>
        // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–≥—Ä—ã
        const BOARD_WIDTH = 600;
        const BOARD_HEIGHT = 600;
        const PLAYER_SPEED = 5;
        const BULLET_SPEED = 7;
        const SEGMENT_SPEED = 2;
        const MUSHROOM_COUNT = 40;
        const SEGMENT_COUNT = 10;
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã –∏–≥—Ä—ã
        let gameBoard = document.getElementById('game-board');
        let scoreDisplay = document.getElementById('score');
        let livesDisplay = document.getElementById('lives');
        let startBtn = document.getElementById('start-btn');
        
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        let gameRunning = false;
        let score = 0;
        let lives = 3;
        let player = null;
        let bullets = [];
        let centipede = [];
        let mushrooms = [];
        let fog = null;
        let powerUps = [];
        let keys = {};
        let gameLoop = null;
        let powerUpActive = false;
        let powerUpTimer = null;
        
        // –°–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
        function createPlayer() {
            player = document.createElement('div');
            player.className = 'player';
            player.textContent = 'üëæ';
            player.style.left = BOARD_WIDTH / 2 + 'px';
            player.style.bottom = '20px';
            gameBoard.appendChild(player);
        }
        
        // –°–æ–∑–¥–∞–Ω–∏–µ –º—É—Ö–æ–º–æ—Ä–æ–≤
        function createMushrooms() {
            for (let i = 0; i < MUSHROOM_COUNT; i++) {
                let mushroom = document.createElement('div');
                mushroom.className = 'mushroom';
                mushroom.textContent = 'üçÑ';
                
                // –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å–µ—Ç–∫–µ
                let gridX = i % 10;
                let gridY = Math.floor(i / 10);
                
                // –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–º–Ω–æ–≥–æ —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏
                let randomOffsetX = Math.random() * 40 - 20;
                let randomOffsetY = Math.random() * 40 - 20;
                
                let x = gridX * (BOARD_WIDTH / 10) + randomOffsetX;
                let y = gridY * (BOARD_HEIGHT / 6) + randomOffsetY;
                
                mushroom.style.left = x + 'px';
                mushroom.style.top = y + 'px';
                
                // –°–æ—Å—Ç–æ—è–Ω–∏–µ –º—É—Ö–æ–º–æ—Ä–∞ (0 - —Ü–µ–ª—ã–π, 1 - —Ä–∞–Ω–µ–Ω—ã–π, 2 - —Ä–∞–∑—Ä—É—à–µ–Ω–Ω—ã–π)
                mushroom.state = 0;
                
                gameBoard.appendChild(mushroom);
                mushrooms.push(mushroom);
            }
        }
        
        // –°–æ–∑–¥–∞–Ω–∏–µ —Ü–µ–Ω—Ç–∏–ø–µ–¥—ã
        function createCentipede() {
            for (let i = 0; i < SEGMENT_COUNT; i++) {
                let segment = document.createElement('div');
                segment.className = 'segment';
                segment.textContent = 'ü¶Ç';
                
                segment.style.left = BOARD_WIDTH / 2 + 'px';
                segment.style.top = (50 + i * 40) + 'px';
                
                // –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è (1 - –≤–ø—Ä–∞–≤–æ, -1 - –≤–ª–µ–≤–æ)
                segment.direction = 1;
                
                gameBoard.appendChild(segment);
                centipede.push(segment);
            }
        }
        
        // –°–æ–∑–¥–∞–Ω–∏–µ –ø—É–ª–∏
        function createBullet() {
            let bullet = document.createElement('div');
            bullet.className = 'bullet';
            bullet.textContent = 'üî•';
            
            let playerX = parseInt(player.style.left);
            bullet.style.left = playerX + 'px';
            bullet.style.bottom = '70px';
            
            gameBoard.appendChild(bullet);
            bullets.push(bullet);
        }
        
        // –°–æ–∑–¥–∞–Ω–∏–µ –≤–∑—Ä—ã–≤–∞
        function createExplosion(x, y) {
            let explosion = document.createElement('div');
            explosion.className = 'explosion';
            explosion.textContent = 'üí•';
            explosion.style.left = x + 'px';
            explosion.style.top = y + 'px';
            
            gameBoard.appendChild(explosion);
            
            // –£–¥–∞–ª–µ–Ω–∏–µ –≤–∑—Ä—ã–≤–∞ –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
            setTimeout(() => {
                if (explosion.parentNode) {
                    explosion.parentNode.removeChild(explosion);
                }
            }, 500);
        }
        
        // –°–æ–∑–¥–∞–Ω–∏–µ power-up
        function createPowerUp(x, y) {
            if (Math.random() < 0.3) { // 30% —à–∞–Ω—Å –≤—ã–ø–∞–¥–µ–Ω–∏—è
                let powerUp = document.createElement('div');
                powerUp.className = 'power-up';
                powerUp.textContent = '‚ö°';
                powerUp.style.left = x + 'px';
                powerUp.style.top = y + 'px';
                
                gameBoard.appendChild(powerUp);
                powerUps.push(powerUp);
            }
        }
        
        // –ê–∫—Ç–∏–≤–∞—Ü–∏—è power-up
        function activatePowerUp() {
            powerUpActive = true;
            player.textContent = 'ü§ñ';
            
            // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ç–∞–π–º–µ—Ä–∞, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
            if (powerUpTimer) {
                clearTimeout(powerUpTimer);
            }
            
            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞
            powerUpTimer = setTimeout(() => {
                powerUpActive = false;
                player.textContent = 'üëæ';
            }, 10000); // 10 —Å–µ–∫—É–Ω–¥
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –∏–≥—Ä–æ–∫–∞
        function updatePlayer() {
            let playerX = parseInt(player.style.left);
            
            if (keys['ArrowLeft'] && playerX > 20) {
                playerX -= PLAYER_SPEED;
            }
            
            if (keys['ArrowRight'] && playerX < BOARD_WIDTH - 20) {
                playerX += PLAYER_SPEED;
            }
            
            player.style.left = playerX + 'px';
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—É–ª—å
        function updateBullets() {
            for (let i = bullets.length - 1; i >= 0; i--) {
                let bullet = bullets[i];
                let bulletY = parseInt(bullet.style.bottom) || 0;
                
                // –î–≤–∏–∂–µ–Ω–∏–µ –ø—É–ª–∏ –≤–≤–µ—Ä—Ö
                bulletY += BULLET_SPEED;
                bullet.style.bottom = bulletY + 'px';
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã—Ö–æ–¥–∞ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã
                if (bulletY > BOARD_HEIGHT) {
                    gameBoard.removeChild(bullet);
                    bullets.splice(i, 1);
                    continue;
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π —Å –º—É—Ö–æ–º–æ—Ä–∞–º–∏
                let bulletX = parseInt(bullet.style.left);
                let bulletTop = BOARD_HEIGHT - bulletY;
                
                for (let j = 0; j < mushrooms.length; j++) {
                    let mushroom = mushrooms[j];
                    if (mushroom.state === 2) continue;
                    
                    let mushroomX = parseInt(mushroom.style.left);
                    let mushroomY = parseInt(mushroom.style.top);
                    
                    // –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è
                    if (Math.abs(bulletX - mushroomX) < 20 && 
                        Math.abs(bulletTop - mushroomY) < 20) {
                        
                        // –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ –ø—É–ª–∏
                        gameBoard.removeChild(bullet);
                        bullets.splice(i, 1);
                        
                        // –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ –º—É—Ö–æ–º–æ—Ä–∞
                        mushroom.state++;
                        if (mushroom.state === 1) {
                            mushroom.textContent = 'üåπ';
                        } else if (mushroom.state === 2) {
                            mushroom.textContent = 'üå±';
                        }
                        
                        // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å—á–µ—Ç–∞
                        score += 10;
                        scoreDisplay.textContent = '–°—á–µ—Ç: ' + score;
                        
                        // –®–∞–Ω—Å –≤—ã–ø–∞–¥–µ–Ω–∏—è power-up
                        createPowerUp(mushroomX, mushroomY);
                        
                        break;
                    }
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π —Å —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏ —Ü–µ–Ω—Ç–∏–ø–µ–¥—ã
                if (bullets[i]) { // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø—É–ª—è –µ—â–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
                    for (let j = 0; j < centipede.length; j++) {
                        let segment = centipede[j];
                        let segmentX = parseInt(segment.style.left);
                        let segmentY = parseInt(segment.style.top);
                        
                        // –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è
                        if (Math.abs(bulletX - segmentX) < 20 && 
                            Math.abs(bulletTop - segmentY) < 20) {
                            
                            // –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ –ø—É–ª–∏
                            gameBoard.removeChild(bullet);
                            bullets.splice(i, 1);
                            
                            // –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–∞
                            createExplosion(segmentX, segmentY);
                            gameBoard.removeChild(segment);
                            centipede.splice(j, 1);
                            
                            // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å—á–µ—Ç–∞
                            score += 100;
                            scoreDisplay.textContent = '–°—á–µ—Ç: ' + score;
                            
                            // –ï—Å–ª–∏ —Ü–µ–Ω—Ç–∏–ø–µ–¥–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∞, —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é
                            if (centipede.length === 0) {
                                createCentipede();
                            }
                            
                            break;
                        }
                    }
                }
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω—Ç–∏–ø–µ–¥—ã
        function updateCentipede() {
            for (let i = 0; i < centipede.length; i++) {
                let segment = centipede[i];
                let segmentX = parseInt(segment.style.left);
                let segmentY = parseInt(segment.style.top);
                
                // –î–≤–∏–∂–µ–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
                segmentX += segment.direction * SEGMENT_SPEED;
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è —Å –≥—Ä–∞–Ω–∏—Ü–∞–º–∏
                if (segmentX <= 20 || segmentX >= BOARD_WIDTH - 20) {
                    segment.direction *= -1; // –°–º–µ–Ω–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
                    segmentY += 40; // –î–≤–∏–∂–µ–Ω–∏–µ –≤–Ω–∏–∑
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è —Å –º—É—Ö–æ–º–æ—Ä–∞–º–∏
                for (let j = 0; j < mushrooms.length; j++) {
                    let mushroom = mushrooms[j];
                    if (mushroom.state === 2) continue;
                    
                    let mushroomX = parseInt(mushroom.style.left);
                    let mushroomY = parseInt(mushroom.style.top);
                    
                    // –ï—Å–ª–∏ —Å–µ–≥–º–µ–Ω—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞–¥ –º—É—Ö–æ–º–æ—Ä–æ–º
                    if (Math.abs(segmentX - mushroomX) < 20 && 
                        segmentY + 20 >= mushroomY && 
                        segmentY <= mushroomY) {
                        
                        segment.direction *= -1; // –°–º–µ–Ω–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
                        segmentY += 40; // –î–≤–∏–∂–µ–Ω–∏–µ –≤–Ω–∏–∑
                        break;
                    }
                }
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ —Å–µ–≥–º–µ–Ω—Ç–∞
                segment.style.left = segmentX + 'px';
                segment.style.top = segmentY + 'px';
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è —Å –∏–≥—Ä–æ–∫–æ–º
                let playerX = parseInt(player.style.left);
                let playerY = BOARD_HEIGHT - 50; // –ü—Ä–∏–º–µ—Ä–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –∏–≥—Ä–æ–∫–∞
                
                if (Math.abs(segmentX - playerX) < 30 && 
                    Math.abs(segmentY - playerY) < 30) {
                    
                    if (!powerUpActive) {
                        loseLife();
                    } else {
                        // –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–∞ –ø—Ä–∏ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–∏ —Å –∏–≥—Ä–æ–∫–æ–º –≤–æ –≤—Ä–µ–º—è power-up
                        createExplosion(segmentX, segmentY);
                        gameBoard.removeChild(segment);
                        centipede.splice(i, 1);
                        
                        // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å—á–µ—Ç–∞
                        score += 100;
                        scoreDisplay.textContent = '–°—á–µ—Ç: ' + score;
                        
                        // –ï—Å–ª–∏ —Ü–µ–Ω—Ç–∏–ø–µ–¥–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∞, —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é
                        if (centipede.length === 0) {
                            createCentipede();
                        }
                    }
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã—Ö–æ–¥–∞ –∑–∞ –Ω–∏–∂–Ω—é—é –≥—Ä–∞–Ω–∏—Ü—É
                if (segmentY > BOARD_HEIGHT) {
                    segmentY = 0;
                    segmentX = Math.random() * BOARD_WIDTH;
                }
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ power-ups
        function updatePowerUps() {
            for (let i = powerUps.length - 1; i >= 0; i--) {
                let powerUp = powerUps[i];
                let powerUpY = parseInt(powerUp.style.top);
                
                // –î–≤–∏–∂–µ–Ω–∏–µ power-up –≤–Ω–∏–∑
                powerUpY += 1;
                powerUp.style.top = powerUpY + 'px';
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã—Ö–æ–¥–∞ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã
                if (powerUpY > BOARD_HEIGHT) {
                    gameBoard.removeChild(powerUp);
                    powerUps.splice(i, 1);
                    continue;
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è —Å –∏–≥—Ä–æ–∫–æ–º
                let powerUpX = parseInt(powerUp.style.left);
                let playerX = parseInt(player.style.left);
                
                if (Math.abs(powerUpX - playerX) < 30) {
                    // –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ power-up
                    gameBoard.removeChild(powerUp);
                    powerUps.splice(i, 1);
                    
                    // –ê–∫—Ç–∏–≤–∞—Ü–∏—è power-up
                    activatePowerUp();
                }
            }
        }
        
        // –ü–æ—Ç–µ—Ä—è –∂–∏–∑–Ω–∏
        function loseLife() {
            lives--;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∂–∏–∑–Ω–µ–π
            livesDisplay.textContent = '–ñ–∏–∑–Ω–∏: ' + '‚ù§Ô∏è'.repeat(lives);
            
            if (lives <= 0) {
                gameOver();
            } else {
                // –í—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞—É–∑–∞ –∏ —Ä–µ—Å—Ç–∞—Ä—Ç
                gameRunning = false;
                clearInterval(gameLoop);
                
                // –°–æ–∑–¥–∞–Ω–∏–µ —Ç—É–º–∞–Ω–∞
                createFog();
                
                setTimeout(() => {
                    // –£–¥–∞–ª–µ–Ω–∏–µ —Ç—É–º–∞–Ω–∞
                    if (fog && fog.parentNode) {
                        fog.parentNode.removeChild(fog);
                    }
                    
                    // –°–±–æ—Ä–∫–∞ –∏–≥—Ä—ã
                    resetGame();
                    startGame();
                }, 2000);
            }
        }
        
        // –°–æ–∑–¥–∞–Ω–∏–µ —Ç—É–º–∞–Ω–∞ (—ç—Ñ—Ñ–µ–∫—Ç –ø–∞—É–∑—ã)
        function createFog() {
            fog = document.createElement('div');
            fog.className = 'fog';
            fog.innerHTML = '<div>‚ù§Ô∏è</div>';
            gameBoard.appendChild(fog);
        }
        
        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã
        function gameOver() {
            gameRunning = false;
            clearInterval(gameLoop);
            
            // –°–æ–∑–¥–∞–Ω–∏–µ —Ç—É–º–∞–Ω–∞
            createFog();
            
            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –∫–æ–Ω—Ü–µ –∏–≥—Ä—ã
            fog.innerHTML = `
                <div id="game-over">–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞</div>
                <div id="final-score">–§–∏–Ω–∞–ª—å–Ω—ã–π —Å—á–µ—Ç: ${score}</div>
            `;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏
            startBtn.textContent = '–ï—â–µ —Ä–∞–∑ üîÑ';
        }
        
        // –°–±—Ä–æ—Å –∏–≥—Ä—ã
        function resetGame() {
            // –û—á–∏—Å—Ç–∫–∞ –¥–æ—Å–∫–∏
            while (gameBoard.firstChild) {
 gameBoard.removeChild(gameBoard.firstChild);
            }
            
            // –°–±—Ä–æ—Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
            score = 0;
            scoreDisplay.textContent = '–°—á–µ—Ç: 0';
            lives = 3;
            livesDisplay.textContent = '–ñ–∏–∑–Ω–∏: ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è';
            bullets = [];
            centipede = [];
            mushrooms = [];
            powerUps = [];
            powerUpActive = false;
            
            // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã
            createPlayer();
            createMushrooms();
            createCentipede();
        }
        
        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        function startGame() {
            if (gameRunning) return;
            
            gameRunning = true;
            gameLoop = setInterval(() => {
                updatePlayer();
                updateBullets();
                updateCentipede();
                updatePowerUps();
            }, 1000 / 60); // ~60 FPS
        }
        
        // –°–æ–±—ã—Ç–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
        document.addEventListener('keydown', (e) => {
            keys[e.key] = true;
            
            // –°—Ç—Ä–µ–ª—å–±–∞ –ø–æ –ø—Ä–æ–±–µ–ª—É
            if (e.key === ' ' && gameRunning) {
                createBullet();
            }
        });
        
        document.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });
        
        // –°–æ–±—ã—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ —Å—Ç–∞—Ä—Ç
        startBtn.addEventListener('click', () => {
            if (!gameRunning) {
                resetGame();
                startGame();
                startBtn.textContent = '–ü–∞—É–∑–∞ ‚è∏Ô∏è';
            } else {
                gameRunning = false;
                clearInterval(gameLoop);
                createFog();
                fog.innerHTML = '<div>–ü–∞—É–∑–∞</div>';
                startBtn.textContent = '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å ‚ñ∂Ô∏è';
            }
        });
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        resetGame();
    </script>
</body>
</html>